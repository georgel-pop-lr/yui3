YUI.add("graphics-svg",function(c,t){var e,i,r,s,h,a,n,o="shape",u=/[a-z][^a-z]*/gi,p=/[\-]?[0-9]*[0-9|\.][0-9]*/g,x=c.Lang,l=c.AttributeLite,_=c.config.doc,d=c.ClassNameManager.getClassName;function f(){}f.prototype={_round:function(t){return Math.round(100*t)/100},_pathSymbolToMethod:{M:"moveTo",m:"relativeMoveTo",L:"lineTo",l:"relativeLineTo",C:"curveTo",c:"relativeCurveTo",Q:"quadraticCurveTo",q:"relativeQuadraticCurveTo",z:"closePath",Z:"closePath"},_currentX:0,_currentY:0,_type:"path",curveTo:function(){return this._curveTo.apply(this,[c.Array(arguments),!1]),this},relativeCurveTo:function(){return this._curveTo.apply(this,[c.Array(arguments),!0]),this},_curveTo:function(t,e){var i,r,s,h,a,n,o,u,p,l,c,_,d=e?"c":"C",f=e?parseFloat(this._currentX):0,g=e?parseFloat(this._currentY):0;for(this._pathArray=this._pathArray||[],this._pathType!==d?(this._pathType=d,this._pathArray.push([d])):this._pathArray[Math.max(0,this._pathArray.length-1)]||this._pathArray.push([]),e=this._pathArray.length-1,this._pathArray[e]=this._pathArray[e].concat(t),_=t.length-5,c=0;c<_;c+=6)i=parseFloat(t[c])+f,r=parseFloat(t[c+1])+g,s=parseFloat(t[c+2])+f,h=parseFloat(t[c+3])+g,a=parseFloat(t[c+4])+f,n=parseFloat(t[c+5])+g,o=Math.max(a,Math.max(i,s)),p=Math.max(n,Math.max(r,h)),u=Math.min(a,Math.min(i,s)),l=Math.min(n,Math.min(r,h)),o=Math.abs(o-u),u=Math.abs(p-l),p=[[this._currentX,this._currentY],[i,r],[s,h],[a,n]],this._setCurveBoundingBox(p,o,u),this._currentX=a,this._currentY=n},quadraticCurveTo:function(){return this._quadraticCurveTo.apply(this,[c.Array(arguments),!1]),this},relativeQuadraticCurveTo:function(){return this._quadraticCurveTo.apply(this,[c.Array(arguments),!0]),this},_quadraticCurveTo:function(t,e){var i,r,s,h,a,n,o,u,p,l,c=e?"q":"Q",_=e?parseFloat(this._currentX):0,d=e?parseFloat(this._currentY):0;for(this._pathArray=this._pathArray||[],this._pathType!==c?(this._pathType=c,this._pathArray.push([c])):this._pathArray[Math.max(0,this._pathArray.length-1)]||this._pathArray.push([]),e=this._pathArray.length-1,this._pathArray[e]=this._pathArray[e].concat(t),l=t.length-3,p=0;p<l;p+=4)i=parseFloat(t[p])+_,r=parseFloat(t[p+1])+d,s=parseFloat(t[p+2])+_,h=parseFloat(t[p+3])+d,a=Math.max(s,i),o=Math.max(h,r),n=Math.min(s,i),u=Math.min(h,r),a=Math.abs(a-n),n=Math.abs(o-u),o=[[this._currentX,this._currentY],[i,r],[s,h]],this._setCurveBoundingBox(o,a,n),this._currentX=s,this._currentY=h},drawRect:function(t,e,i,r){return this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this},drawRoundRect:function(t,e,i,r,s,h){return this.moveTo(t,e+h),this.lineTo(t,e+r-h),this.quadraticCurveTo(t,e+r,t+s,e+r),this.lineTo(t+i-s,e+r),this.quadraticCurveTo(t+i,e+r,t+i,e+r-h),this.lineTo(t+i,e+h),this.quadraticCurveTo(t+i,e,t+i-s,e),this.lineTo(t+s,e),this.quadraticCurveTo(t,e,t,e+h),this},drawCircle:function(t,e,i){var r=2*i;return this._drawingComplete=!1,this._trackSize(t,e),this._trackSize(t+r,e+r),this._pathArray=this._pathArray||[],this._pathArray.push(["M",t+i,e]),this._pathArray.push(["A",i,i,0,1,0,t+i,e+r]),this._pathArray.push(["A",i,i,0,1,0,t+i,e]),this._currentX=t,this._currentY=e,this},drawEllipse:function(t,e,i,r){var s=.5*i,h=.5*r;return this._drawingComplete=!1,this._trackSize(t,e),this._trackSize(t+i,e+r),this._pathArray=this._pathArray||[],this._pathArray.push(["M",t+s,e]),this._pathArray.push(["A",s,h,0,1,0,t+s,e+r]),this._pathArray.push(["A",s,h,0,1,0,t+s,e]),this._currentX=t,this._currentY=e,this},drawDiamond:function(t,e,i,r){var s=.5*i,h=.5*r;return this.moveTo(t+s,e),this.lineTo(t+i,e+h),this.lineTo(t+s,e+r),this.lineTo(t,e+h),this.lineTo(t+s,e),this},drawWedge:function(t,e,i,r,s,h){var a,n,o,u,p,l,c,_,d,f=2*s;if(this._pathArray=this._pathArray||[],h=h||s,"M"!==this._pathType?(this._pathType="M",this._pathArray.push(["M"])):this._getCurrentArray(),d=this._pathArray.length-1,this._pathArray[d].push(t),this._pathArray[d].push(t),n=-((r=360<Math.abs(r)?360:r)/(a=Math.ceil(Math.abs(r)/45)))/180*Math.PI,o=i/180*Math.PI,0<a)for(r=t+Math.cos(i/180*Math.PI)*s,i=e+Math.sin(i/180*Math.PI)*h,this._pathType="L",this._pathArray[++d]=["L"],this._pathArray[d].push(this._round(r)),this._pathArray[d].push(this._round(i)),d++,this._pathType="Q",this._pathArray[d]=["Q"],_=0;_<a;++_)c=(o+=n)-n/2,u=t+Math.cos(o)*s,p=e+Math.sin(o)*h,l=t+Math.cos(c)*(s/Math.cos(n/2)),c=e+Math.sin(c)*(h/Math.cos(n/2)),this._pathArray[d].push(this._round(l)),this._pathArray[d].push(this._round(c)),this._pathArray[d].push(this._round(u)),this._pathArray[d].push(this._round(p));return this._currentX=t,this._currentY=e,this._trackSize(f,f),this},lineTo:function(){return this._lineTo.apply(this,[c.Array(arguments),!1]),this},relativeLineTo:function(){return this._lineTo.apply(this,[c.Array(arguments),!0]),this},_lineTo:function(t,e){var i,r,s,h,a,n=t[0],o=e?"l":"L",u=e?parseFloat(this._currentX):0,p=e?parseFloat(this._currentY):0;if(this._pathArray=this._pathArray||[],this._shapeType="path",r=t.length,this._pathType!==o?(this._pathType=o,this._pathArray.push([o])):this._getCurrentArray(),s=this._pathArray.length-1,"string"==typeof n||"number"==typeof n)for(i=0;i<r;i+=2)h=parseFloat(t[i]),a=parseFloat(t[i+1]),this._pathArray[s].push(h),this._pathArray[s].push(a),a+=p,this._currentX=h+=u,this._currentY=a,this._trackSize.apply(this,[h,a]);else for(i=0;i<r;++i)h=parseFloat(t[i][0]),a=parseFloat(t[i][1]),this._pathArray[s].push(h),this._pathArray[s].push(a),this._currentX=h,this._currentY=a,this._trackSize.apply(this,[h+=u,a+=p])},moveTo:function(){return this._moveTo.apply(this,[c.Array(arguments),!1]),this},relativeMoveTo:function(){return this._moveTo.apply(this,[c.Array(arguments),!0]),this},_moveTo:function(t,e){var i=parseFloat(t[0]),t=parseFloat(t[1]),r=e?"m":"M",s=e?parseFloat(this._currentX):0,e=e?parseFloat(this._currentY):0;this._pathArray=this._pathArray||[],this._pathType=r,this._pathArray.push([r]),r=this._pathArray.length-1,this._pathArray[r]=this._pathArray[r].concat([i,t]),t+=e,
this._currentX=i+=s,this._currentY=t,this._trackSize(i,t)},end:function(){return this._closePath(),this},clear:function(){return this._currentX=0,this._currentY=0,this._width=0,this._height=0,this._left=0,this._right=0,this._top=0,this._bottom=0,this._pathArray=[],this._path="",this._pathType="",this},_closePath:function(){var t,e,i,r,s,h,a="",n=this.node,o=parseFloat(this._left),u=parseFloat(this._top),p=this.get("fill");if(this._pathArray){for(t=this._pathArray.concat();t&&0<t.length;)switch(r=(e=t.shift()).length,a+="A"===(i=e[0])?i+e[1]+","+e[2]:"z"===i||"Z"===i?" z ":"C"===i||"c"===i?i+(e[1]-o)+","+(e[2]-u):" "+i+parseFloat(e[1]-o),i){case"L":case"l":case"M":case"m":case"Q":case"q":for(h=2;h<r;++h)s=e[h]-(s=h%2==0?u:o),a+=", "+parseFloat(s);break;case"A":s=" "+parseFloat(e[3])+" "+parseFloat(e[4]),a+=" "+(s=(s+=","+parseFloat(e[5])+" "+parseFloat(e[6]-o))+(","+parseFloat(e[7]-u)));break;case"C":case"c":for(h=3;h<r-1;h+=2)s=parseFloat(e[h]-o),a+=" "+(s=(s+=", ")+parseFloat(e[h+1]-u))}p&&p.color&&(a+="z"),c.Lang.trim(a),a&&n.setAttribute("d",a),this._path=a,this._fillChangeHandler(),this._strokeChangeHandler(),this._updateTransform()}},closePath:function(){return this._pathArray.push(["z"]),this},_getCurrentArray:function(){var t=this._pathArray[Math.max(0,this._pathArray.length-1)];return t||this._pathArray.push(t=[]),t},getBezierData:function(t,e){for(var i,r=t.length,s=[],h=0;h<r;++h)s[h]=[t[h][0],t[h][1]];for(i=1;i<r;++i)for(h=0;h<r-i;++h)s[h][0]=(1-e)*s[h][0]+e*s[parseInt(h+1,10)][0],s[h][1]=(1-e)*s[h][1]+e*s[parseInt(h+1,10)][1];return[s[0][0],s[0][1]]},_setCurveBoundingBox:function(t,e,i){for(var r,s=this._currentX,h=s,a=this._currentY,n=a,o=Math.round(Math.sqrt(e*e+i*i)),u=1/o,p=0;p<o;++p)r=this.getBezierData(t,u*p),s=isNaN(s)?r[0]:Math.min(r[0],s),h=isNaN(h)?r[0]:Math.max(r[0],h),a=isNaN(a)?r[1]:Math.min(r[1],a),n=isNaN(n)?r[1]:Math.max(r[1],n);s=Math.round(10*s)/10,h=Math.round(10*h)/10,a=Math.round(10*a)/10,n=Math.round(10*n)/10,this._trackSize(h,n),this._trackSize(s,a)},_trackSize:function(t,e){t>this._right&&(this._right=t),t<this._left&&(this._left=t),e<this._top&&(this._top=e),e>this._bottom&&(this._bottom=e),this._width=this._right-this._left,this._height=this._bottom-this._top}},c.SVGDrawing=f,(i=function(){this._transforms=[],this.matrix=new c.Matrix,this._normalizedMatrix=new c.Matrix,i.superclass.constructor.apply(this,arguments)}).NAME="shape",c.extend(i,c.GraphicBase,c.mix({_x:0,_y:0,init:function(){this.initializer.apply(this,arguments)},initializer:function(t){var t=t.graphic,e=this.get("data");this.createNode(),t&&this._setGraphic(t),e&&this._parsePathData(e),this._updateHandler()},_setGraphic:function(t){t instanceof c.SVGGraphic?this._graphic=t:((t=new c.SVGGraphic({render:t}))._appendShape(this),this._graphic=t)},addClass:function(t){var e=this.node;e.className.baseVal=x.trim([e.className.baseVal,t].join(" "))},removeClass:function(t){var e=this.node,i=(i=e.className.baseVal).replace(new RegExp(t+" "),t).replace(new RegExp(t),"");e.className.baseVal=i},getXY:function(){var t=this._graphic.getXY(),e=this._x,i=this._y;return[t[0]+e,t[1]+i]},setXY:function(t){var e=this._graphic.getXY();this._x=t[0]-e[0],this._y=t[1]-e[1],this.set("transform",this.get("transform"))},contains:function(t){return(t instanceof c.Node?t._node:t)===this.node},compareTo:function(t){return this.node===t},test:function(t){return c.Selector.test(this.node,t)},_getDefaultFill:function(){return{type:"solid",opacity:1,cx:.5,cy:.5,fx:.5,fy:.5,r:.5}},_getDefaultStroke:function(){return{weight:1,dashstyle:"none",color:"#000",opacity:1}},createNode:function(){var t=this,e=_.createElementNS("http://www.w3.org/2000/svg","svg:"+this._type),i=t.get("id"),r=t.name,s=t._camelCaseConcat,h=t.get("pointerEvents");t.node=e,t.addClass(d(o)+" "+d(s("svg",o))+" "+d(r)+" "+d(s("svg",r))),i&&e.setAttribute("id",i),h&&e.setAttribute("pointer-events",h),t.get("visible")||c.DOM.setStyle(e,"visibility","hidden"),c.DOM.setAttribute(this.node,"shape-rendering",this.get("shapeRendering"))},on:function(t,e){return c.Node.DOM_EVENTS[t]?c.on(t,e,"#"+this.get("id")):c.on.apply(this,arguments)},_strokeChangeHandler:function(){var t,e,i,r=this.node,s=this.get("stroke");s&&s.weight&&0<s.weight?(i=s.linejoin||"round",t=parseFloat(s.opacity),e=s.dashstyle||"none",e=x.isArray(e)?e.toString():e,s.color=s.color||"#000000",s.weight=s.weight||1,s.opacity=x.isNumber(t)?t:1,s.linecap=s.linecap||"butt",r.setAttribute("stroke-dasharray",e),r.setAttribute("stroke",s.color),r.setAttribute("stroke-linecap",s.linecap),r.setAttribute("stroke-width",s.weight),r.setAttribute("stroke-opacity",s.opacity),"round"===i||"bevel"===i?r.setAttribute("stroke-linejoin",i):(i=parseInt(i,10),x.isNumber(i)&&(r.setAttribute("stroke-miterlimit",Math.max(i,1)),r.setAttribute("stroke-linejoin","miter")))):r.setAttribute("stroke","none")},_fillChangeHandler:function(){var t,e=this.node,i=this.get("fill");i?"linear"===(t=i.type)||"radial"===t?(this._setGradientFill(i),e.setAttribute("fill","url(#grad"+this.get("id")+")")):i.color?(t=parseFloat(i.opacity),t=x.isNumber(t)?t:1,e.setAttribute("fill",i.color),e.setAttribute("fill-opacity",t)):e.setAttribute("fill","none"):e.setAttribute("fill","none")},_setGradientFill:function(t){var e,i,r,s,h,a,n,o=x.isNumber,u=this._graphic,p=t.type,l=u.getGradientNode("grad"+this.get("id"),p),c=t.stops,_=this.get("width"),d=this.get("height"),f=t.rotation||0,g=Math.PI/180,g=parseFloat(parseFloat(Math.tan(f*g)).toFixed(8)),y="0%",m="100%",v="0%",A="0%",b=t.cx,T=t.cy,w=t.fx,M=t.fy,t=t.r,S=[];for("linear"===p?(b=_/2,T=d/2,Math.abs(g)*_/2>=d/2?(A=f<180?(v=0,d):(v=d,0),y=b-(T-v)/g,m=b-(T-A)/g):(m=90<f&&f<270?(y=_,0):(y=0,_),v=-1*(g*(b-y)-T),A=-1*(g*(b-m)-T)),y=Math.round(100*y/_),m=Math.round(100*m/_),v=Math.round(100*v/d),A=Math.round(100*A/d),y=o(y)?y:0,m=o(m)?m:100,v=o(v)?v:0,A=o(A)?A:0,l.setAttribute("spreadMethod","pad"),l.setAttribute("width",_),l.setAttribute("height",d),l.setAttribute("x1",y+"%"),l.setAttribute("x2",m+"%")
,l.setAttribute("y1",v+"%"),l.setAttribute("y2",A+"%")):(l.setAttribute("cx",100*b+"%"),l.setAttribute("cy",100*T+"%"),l.setAttribute("fx",100*w+"%"),l.setAttribute("fy",100*M+"%"),l.setAttribute("r",100*t+"%")),a=c.length,h=0;h<a;++h)s=this._stops&&0<this._stops.length?(r=this._stops.shift(),!1):(r=u._createGraphicNode("stop"),!0),e=(n=c[h]).opacity,i=n.color,n=n.offset||h/(a-1),n=Math.round(100*n)+"%",e=o(e)?e:1,e=Math.max(0,Math.min(1,e)),r.setAttribute("offset",n),r.setAttribute("stop-color",i),r.setAttribute("stop-opacity",e),s&&l.appendChild(r),S.push(r);for(;this._stops&&0<this._stops.length;)l.removeChild(this._stops.shift());this._stops=S},_stops:null,set:function(){l.prototype.set.apply(this,arguments),this.initialized&&this._updateHandler()},translate:function(){this._addTransform("translate",arguments)},translateX:function(){this._addTransform("translateX",arguments)},translateY:function(){this._addTransform("translateY",arguments)},skew:function(){this._addTransform("skew",arguments)},skewX:function(){this._addTransform("skewX",arguments)},skewY:function(){this._addTransform("skewY",arguments)},rotate:function(){this._addTransform("rotate",arguments)},scale:function(){this._addTransform("scale",arguments)},_addTransform:function(t,e){e=c.Array(e),this._transform=x.trim(this._transform+" "+t+"("+e.join(", ")+")"),e.unshift(t),this._transforms.push(e),this.initialized&&this._updateTransform()},_updateTransform:function(){var t,e,i,r,s,h,a,n="path"===this._type,o=this.node,u=this.matrix,p=this._normalizedMatrix,l=this._transforms.length;if(n||this._transforms&&0<this._transforms.length){for(i=this._x,r=this._y,s=i+(e=this.get("transformOrigin"))[0]*this.get("width"),h=r+e[1]*this.get("height"),n&&(this instanceof c.SVGPath||(s=this._left+e[0]*this.get("width"),h=this._top+e[1]*this.get("height")),p.init({dx:i+this._left,dy:r+this._top})),p.translate(s,h),a=0;a<l;++a)(t=this._transforms[a].shift())&&(p[t].apply(p,this._transforms[a]),u[t].apply(u,this._transforms[a])),n&&this._transforms[a].unshift(t);p.translate(-s,-h),e="matrix("+p.a+","+p.b+","+p.c+","+p.d+","+p.dx+","+p.dy+")"}this._graphic.addToRedrawQueue(this),e&&o.setAttribute("transform",e),n||(this._transforms=[])},_draw:function(){var t=this.node;t.setAttribute("width",this.get("width")),t.setAttribute("height",this.get("height")),t.setAttribute("x",this._x),t.setAttribute("y",this._y),t.style.left=this._x+"px",t.style.top=this._y+"px",this._fillChangeHandler(),this._strokeChangeHandler(),this._updateTransform()},_updateHandler:function(){this._draw()},_transform:"",getBounds:function(){var t=this._type,e=this.get("stroke"),i=this.get("width"),r=this.get("height"),s="path"===t?0:this._x,t="path"===t?0:this._y;return e&&e.weight&&(i=s+i+(e=e.weight)-(s-e),r=t+r+e-(t-e),s-=e,t-=e),this._normalizedMatrix.getContentRect(i,r,s,t)},toFront:function(){var t=this.get("graphic");t&&t._toFront(this)},toBack:function(){var t=this.get("graphic");t&&t._toBack(this)},_parsePathData:function(t){var e,i,r,s,h=c.Lang.trim(t.match(u)),a=this._pathSymbolToMethod;if(h){for(this.clear(),r=h.length||0,i=0;i<r;i+=1)e=(s=h[i]).substr(0,1),s=s.substr(1).match(p),(e=a[e])&&(s?this[e].apply(this,s):this[e].apply(this));this.end()}},destroy:function(){var t=this.get("graphic");t?t.removeShape(this):this._destroy()},_destroy:function(){this.node&&(c.Event.purgeElement(this.node,!0),this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null)}},c.SVGDrawing.prototype)),i.ATTRS={transformOrigin:{valueFn:function(){return[.5,.5]}},transform:{setter:function(t){return this.matrix.init(),this._normalizedMatrix.init(),this._transforms=this.matrix.getTransformArray(t),this._transform=t},getter:function(){return this._transform}},id:{valueFn:function(){return c.guid()},setter:function(t){var e=this.node;return e&&e.setAttribute("id",t),t}},x:{getter:function(){return this._x},setter:function(t){var e=this.get("transform");this._x=t,e&&this.set("transform",e)}},y:{getter:function(){return this._y},setter:function(t){var e=this.get("transform");this._y=t,e&&this.set("transform",e)}},width:{value:0},height:{value:0},visible:{value:!0,setter:function(t){return this.node&&(this.node.style.visibility=t?"visible":"hidden"),t}},shapeRendering:{value:"auto",setter:function(t){return this.node&&c.DOM.setAttribute(this.node,"shape-rendering",t),t}},fill:{valueFn:"_getDefaultFill",setter:function(t){var e=this.get("fill")||this._getDefaultFill(),e=t?c.merge(e,t):null;return e&&e.color&&(e.color!==undefined&&"none"!==e.color||(e.color=null)),e}},stroke:{valueFn:"_getDefaultStroke",setter:function(t){var e,i=this.get("stroke")||this._getDefaultStroke();return t&&t.hasOwnProperty("weight")&&(e=parseInt(t.weight,10),isNaN(e)||(t.weight=e)),t?c.merge(i,t):null}},pointerEvents:{valueFn:function(){var t="visiblePainted",e=this.node;return e&&e.setAttribute("pointer-events",t),t},setter:function(t){var e=this.node;return e&&e.setAttribute("pointer-events",t),t}},node:{readOnly:!0,getter:function(){return this.node}},data:{setter:function(t){return this.get("node")&&this._parsePathData(t),t}},graphic:{readOnly:!0,getter:function(){return this._graphic}}},c.SVGShape=i,(h=function(){h.superclass.constructor.apply(this,arguments)}).NAME="path",c.extend(h,c.SVGShape,{_left:0,_right:0,_top:0,_bottom:0,_type:"path",_path:""}),h.ATTRS=c.merge(c.SVGShape.ATTRS,{path:{readOnly:!0,getter:function(){return this._path}},width:{getter:function(){return Math.max(this._right-this._left,0)}},height:{getter:function(){return Math.max(this._bottom-this._top,0)}}}),c.SVGPath=h,(s=function(){s.superclass.constructor.apply(this,arguments)}).NAME="rect",c.extend(s,c.SVGShape,{_type:"rect"}),s.ATTRS=c.SVGShape.ATTRS,c.SVGRect=s,(a=function(){a.superclass.constructor.apply(this,arguments)}).NAME="ellipse",c.extend(a,i,{_type:"ellipse",_draw:function(){var t=this.node,e=.5*this.get("width"),i=.5*this.get("height"),r=this.get("x")+e,s=this.get("y")+i;t.setAttribute("rx",e),
t.setAttribute("ry",i),t.setAttribute("cx",r),t.setAttribute("cy",s),this._fillChangeHandler(),this._strokeChangeHandler(),this._updateTransform()}}),a.ATTRS=c.merge(i.ATTRS,{xRadius:{setter:function(t){this.set("width",2*t)},getter:function(){var t=this.get("width");return t&&(t*=.5),t}},yRadius:{setter:function(t){this.set("height",2*t)},getter:function(){var t=this.get("height");return t&&(t*=.5),t}}}),c.SVGEllipse=a,(r=function(){r.superclass.constructor.apply(this,arguments)}).NAME="circle",c.extend(r,c.SVGShape,{_type:"circle",_draw:function(){var t=this.node,e=this.get("x"),i=this.get("y"),r=this.get("radius"),e=e+r,i=i+r;t.setAttribute("r",r),t.setAttribute("cx",e),t.setAttribute("cy",i),this._fillChangeHandler(),this._strokeChangeHandler(),this._updateTransform()}}),r.ATTRS=c.merge(c.SVGShape.ATTRS,{width:{setter:function(t){return this.set("radius",t/2),t},getter:function(){return 2*this.get("radius")}},height:{setter:function(t){return this.set("radius",t/2),t},getter:function(){return 2*this.get("radius")}},radius:{value:0}}),c.SVGCircle=r,(n=function(){n.superclass.constructor.apply(this,arguments)}).NAME="svgPieSlice",c.extend(n,c.SVGShape,c.mix({_type:"path",_draw:function(){var t=this.get("cx"),e=this.get("cy"),i=this.get("startAngle"),r=this.get("arc"),s=this.get("radius");this.clear(),this.drawWedge(t,e,i,r,s),this.end()}},c.SVGDrawing.prototype)),n.ATTRS=c.mix({cx:{value:0},cy:{value:0},startAngle:{value:0},arc:{value:0},radius:{value:0}},c.SVGShape.ATTRS),c.SVGPieSlice=n,(e=function(){e.superclass.constructor.apply(this,arguments)}).NAME="svgGraphic",e.ATTRS={render:{},id:{valueFn:function(){return c.guid()},setter:function(t){var e=this._node;return e&&e.setAttribute("id",t),t}},shapes:{readOnly:!0,getter:function(){return this._shapes}},contentBounds:{readOnly:!0,getter:function(){return this._contentBounds}},node:{readOnly:!0,getter:function(){return this._node}},width:{setter:function(t){return this._node&&(this._node.style.width=t+"px"),t}},height:{setter:function(t){return this._node&&(this._node.style.height=t+"px"),t}},autoSize:{value:!1},preserveAspectRatio:{value:"xMidYMid"},resizeDown:{value:!1},x:{getter:function(){return this._x},setter:function(t){return this._x=t,this._node&&(this._node.style.left=t+"px"),t}},y:{getter:function(){return this._y},setter:function(t){return this._y=t,this._node&&(this._node.style.top=t+"px"),t}},autoDraw:{value:!0},visible:{value:!0,setter:function(t){return this._toggleVisible(t),t}},pointerEvents:{value:"none"}},c.extend(e,c.GraphicBase,{set:function(){var t,e=arguments[0],i={autoDraw:!0,autoSize:!0,preserveAspectRatio:!0,resizeDown:!0},r=!1;if(l.prototype.set.apply(this,arguments),!0===this._state.autoDraw&&0<c.Object.size(this._shapes))if(x.isString&&i[e])r=!0;else if(x.isObject(e))for(t in i)if(i.hasOwnProperty(t)&&e[t]){r=!0;break}r&&this._redraw()},_x:0,_y:0,getXY:function(){var t,e=this._node;return t=e?c.DOM.getXY(e):t},initializer:function(){var t=this.get("render"),e=this.get("visible")?"visible":"hidden";this._shapes={},this._contentBounds={left:0,top:0,right:0,bottom:0},this._gradients={},this._node=_.createElement("div"),this._node.style.position="absolute",this._node.style.left=this.get("x")+"px",this._node.style.top=this.get("y")+"px",this._node.style.visibility=e,this._contentNode=this._createGraphics(),this._contentNode.style.visibility=e,this._contentNode.setAttribute("id",this.get("id")),this._node.appendChild(this._contentNode),t&&this.render(t)},render:function(t){var e,i=t||_.body;return t instanceof c.Node?i=t._node:c.Lang.isString(t)&&(i=c.Selector.query(t,_.body,!0)),t=this.get("width")||parseInt(c.DOM.getComputedStyle(i,"width"),10),e=this.get("height")||parseInt(c.DOM.getComputedStyle(i,"height"),10),i.appendChild(this._node),this.set("width",t),this.set("height",e),this},destroy:function(){this.removeAllShapes(),this._contentNode&&(this._removeChildren(this._contentNode),this._contentNode.parentNode&&this._contentNode.parentNode.removeChild(this._contentNode),this._contentNode=null),this._node&&(this._removeChildren(this._node),this._node.parentNode&&this._node.parentNode.removeChild(this._node),this._node=null)},addShape:function(t){(t.graphic=this).get("visible")||(t.visible=!1);t=new(this._getShapeClass(t.type))(t);return this._appendShape(t),t},_appendShape:function(t){var t=t.node,e=this._frag||this._contentNode;(this.get("autoDraw")?e:this._getDocFrag()).appendChild(t)},removeShape:function(t){return t instanceof i||x.isString(t)&&(t=this._shapes[t]),t&&t instanceof i&&(t._destroy(),delete this._shapes[t.get("id")]),this.get("autoDraw")&&this._redraw(),t},removeAllShapes:function(){var t,e=this._shapes;for(t in e)e.hasOwnProperty(t)&&e[t]._destroy();this._shapes={}},_removeChildren:function(t){if(t.hasChildNodes())for(var e;t.firstChild;)e=t.firstChild,this._removeChildren(e),t.removeChild(e)},clear:function(){this.removeAllShapes()},_toggleVisible:function(t){var e,i=this._shapes,r=t?"visible":"hidden";if(i)for(e in i)i.hasOwnProperty(e)&&i[e].set("visible",t);this._contentNode&&(this._contentNode.style.visibility=r),this._node&&(this._node.style.visibility=r)},_getShapeClass:function(t){var e=this._shapeClass[t];return e||t},_shapeClass:{circle:c.SVGCircle,rect:c.SVGRect,path:c.SVGPath,ellipse:c.SVGEllipse,pieslice:c.SVGPieSlice},getShapeById:function(t){return this._shapes[t]},batch:function(t){var e=this.get("autoDraw");this.set("autoDraw",!1),t(),this.set("autoDraw",e)},_getDocFrag:function(){return this._frag||(this._frag=_.createDocumentFragment()),this._frag},_redraw:function(){var t,e,i,r,s=this.get("autoSize"),h=this.get("preserveAspectRatio"),a=this.get("resizeDown")?this._getUpdatedContentBounds():this._contentBounds,n=a.left,o=a.right,u=a.top,o=o-n,a=a.bottom-u;s?"sizeContentToGraphic"===s?(s=this._node,t=parseFloat(c.DOM.getComputedStyle(s,"width")),e=parseFloat(c.DOM.getComputedStyle(s,"height")),i=r=0,this._contentNode.setAttribute("preserveAspectRatio",h)):(e=a,i=n,r=u,
this._state.width=t=o,this._state.height=a,this._node&&(this._node.style.width=o+"px",this._node.style.height=a+"px")):(t=o,e=a,i=n,r=u),this._contentNode&&(this._contentNode.style.left=i+"px",this._contentNode.style.top=r+"px",this._contentNode.setAttribute("width",t),this._contentNode.setAttribute("height",e),this._contentNode.style.width=t+"px",this._contentNode.style.height=e+"px",this._contentNode.setAttribute("viewBox",n+" "+u+" "+o+" "+a)),this._frag&&(this._contentNode&&this._contentNode.appendChild(this._frag),this._frag=null)},addToRedrawQueue:function(t){var e;this._shapes[t.get("id")]=t,this.get("resizeDown")||(t=t.getBounds(),(e=this._contentBounds).left=(e.left<t.left?e:t).left,e.top=(e.top<t.top?e:t).top,e.right=(e.right>t.right?e:t).right,e.bottom=(e.bottom>t.bottom?e:t).bottom,e.width=e.right-e.left,e.height=e.bottom-e.top,this._contentBounds=e),this.get("autoDraw")&&this._redraw()},_getUpdatedContentBounds:function(){var t,e,i=this._shapes,r={};for(e in i)i.hasOwnProperty(e)&&(t=i[e].getBounds(),r.left=x.isNumber(r.left)?Math.min(r.left,t.left):t.left,r.top=x.isNumber(r.top)?Math.min(r.top,t.top):t.top,r.right=x.isNumber(r.right)?Math.max(r.right,t.right):t.right,r.bottom=x.isNumber(r.bottom)?Math.max(r.bottom,t.bottom):t.bottom);return r.left=x.isNumber(r.left)?r.left:0,r.top=x.isNumber(r.top)?r.top:0,r.right=x.isNumber(r.right)?r.right:0,r.bottom=x.isNumber(r.bottom)?r.bottom:0,this._contentBounds=r},_createGraphics:function(){var t=this._createGraphicNode("svg"),e=this.get("pointerEvents");return t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.overflow="auto",t.setAttribute("overflow","auto"),t.setAttribute("pointer-events",e),t},_createGraphicNode:function(t,e){var i=_.createElementNS("http://www.w3.org/2000/svg","svg:"+t);return"defs"!==t&&"stop"!==t&&"linearGradient"!==t&&"radialGradient"!==t&&i.setAttribute("pointer-events",e||"none"),i},getGradientNode:function(t,e){var i,r=this._gradients,s=e+"Gradient";return r.hasOwnProperty(t)&&-1<r[t].tagName.indexOf(e)?i=this._gradients[t]:(i=this._createGraphicNode(s),this._defs||(this._defs=this._createGraphicNode("defs"),this._contentNode.appendChild(this._defs)),this._defs.appendChild(i),t=t||"gradient"+Math.round(1e5*Math.random()),i.setAttribute("id",t),r.hasOwnProperty(t)&&this._defs.removeChild(r[t]),r[t]=i),i},_toFront:function(t){var e=this._contentNode;t instanceof c.SVGShape&&(t=t.get("node")),e&&t&&e.appendChild(t)},_toBack:function(t){var e,i=this._contentNode;t instanceof c.SVGShape&&(t=t.get("node")),i&&t&&((e=i.firstChild)?i.insertBefore(t,e):i.appendChild(t))}}),c.SVGGraphic=e},"@VERSION@",{requires:["graphics"]});