YUI.add("console",function(r,k){var t=r.ClassNameManager.getClassName,s="checked",n="clear",e="click",i="collapsed",o="console",l="contentBox",a="disabled",c="entry",u="error",h="height",_="info",g="lastTime",d="pause",f="paused",p="reset",v="startTime",C="title",L="warn",b=".",m=t(o,"button"),y=t(o,"checkbox"),E=t(o,n),T=t(o,"collapse"),N=t(o,i),I=t(o,"controls"),D=t(o,"hd"),F=t(o,"bd"),V=t(o,"ft"),S=t(o,C),w=t(o,c),z=t(o,c,"cat"),Y=t(o,c,"content"),G=t(o,c,"meta"),W=t(o,c,"src"),j=t(o,c,"time"),A=t(o,d),H=t(o,d,"label"),q=/^(\S+)\s/,$=/&(?!#?[a-z0-9]+;)/g,J=/>/g,K=/</g,t='<div class="{entry_class} {cat_class} {src_class}"><p class="{entry_meta_class}"><span class="{entry_src_class}">{sourceAndDetail}</span><span class="{entry_cat_class}">{category}</span><span class="{entry_time_class}"> {totalTime}ms (+{elapsedTime}) {localTime}</span></p><pre class="{entry_content_class}">{message}</pre></div>',M=r.Lang,O=r.Node.create,P=M.isNumber,B=M.isString,R=r.merge,U=r.Lang.sub;function x(){x.superclass.constructor.apply(this,arguments)}r.Console=r.extend(x,r.Widget,{_evtCat:null,_head:null,_body:null,_foot:null,_printLoop:null,buffer:null,log:function(){return r.log.apply(r,arguments),this},clearConsole:function(){return this._body.empty(),this._cancelPrintLoop(),this.buffer=[],this},reset:function(){return this.fire(p),this},collapse:function(){return this.set(i,!0),this},expand:function(){return this.set(i,!1),this},printBuffer:function(t){var e,s=this.buffer,i=r.config.debug,n=[],o=this.get("consoleLimit"),l=this.get("newestOnTop"),a=l?this._body.get("firstChild"):null;if(s.length>o&&s.splice(0,s.length-o),t=Math.min(s.length,t||s.length),r.config.debug=!1,!this.get(f)&&this.get("rendered")){for(e=0;e<t&&s.length;++e)n[e]=this._createEntryHTML(s.shift());s.length||this._cancelPrintLoop(),n.length&&(l&&n.reverse(),this._body.insertBefore(O(n.join("")),a),this.get("scrollIntoView")&&this.scrollToLatest(),this._trimOldEntries())}return r.config.debug=i,this},initializer:function(){this._evtCat=r.stamp(this)+"|",this.buffer=[],this.get("logSource").on(this._evtCat+this.get("logEvent"),r.bind("_onLogEvent",this)),this.publish(c,{defaultFn:this._defEntryFn}),this.publish(p,{defaultFn:this._defResetFn}),this.after("rendered",this._schedulePrint)},destructor:function(){var t=this.get("boundingBox");this._cancelPrintLoop(),this.get("logSource").detach(this._evtCat+"*"),t.purge(!0)},renderUI:function(){this._initHead(),this._initBody(),this._initFoot();var t=this.get("style");"block"!==t&&this.get("boundingBox").addClass(this.getClassName(t))},syncUI:function(){this._uiUpdatePaused(this.get(f)),this._uiUpdateCollapsed(this.get(i)),this._uiSetHeight(this.get(h))},bindUI:function(){this.get(l).one("button."+T).on(e,this._onCollapseClick,this),this.get(l).one("input[type=checkbox]."+A).on(e,this._onPauseClick,this),this.get(l).one("button."+E).on(e,this._onClearClick,this),this.after(this._evtCat+"stringsChange",this._afterStringsChange),this.after(this._evtCat+"pausedChange",this._afterPausedChange),this.after(this._evtCat+"consoleLimitChange",this._afterConsoleLimitChange),this.after(this._evtCat+"collapsedChange",this._afterCollapsedChange)},_initHead:function(){var t=this.get(l),e=R(x.CHROME_CLASSES,{str_collapse:this.get("strings.collapse"),str_title:this.get("strings.title")});this._head=O(U(x.HEADER_TEMPLATE,e)),t.insertBefore(this._head,t.get("firstChild"))},_initBody:function(){this._body=O(U(x.BODY_TEMPLATE,x.CHROME_CLASSES)),this.get(l).appendChild(this._body)},_initFoot:function(){var t=R(x.CHROME_CLASSES,{id_guid:r.guid(),str_pause:this.get("strings.pause"),str_clear:this.get("strings.clear")});this._foot=O(U(x.FOOTER_TEMPLATE,t)),this.get(l).appendChild(this._foot)},_isInLogLevel:function(t){var t=t.cat,e=this.get("logLevel");return e===_||!((t=B(t=t||_)?t.toLowerCase():t)===L&&e===u||t===_&&e!==_)},_normalizeMessage:function(t){var e=t.msg,s=t.cat,t=t.src,e={time:new Date,message:e,category:s||this.get("defaultCategory"),sourceAndDetail:t||this.get("defaultSource"),source:null,localTime:null,elapsedTime:null,totalTime:null};return e.source=q.test(e.sourceAndDetail)?RegExp.$1:e.sourceAndDetail,e.localTime=e.time.toLocaleTimeString?e.time.toLocaleTimeString():e.time+"",e.elapsedTime=e.time-this.get(g),e.totalTime=e.time-this.get(v),this._set(g,e.time),e},_schedulePrint:function(){this._printLoop||this.get(f)||!this.get("rendered")||(this._printLoop=r.later(this.get("printTimeout"),this,this.printBuffer,this.get("printLimit"),!0))},_createEntryHTML:function(s){return s=R(this._htmlEscapeMessage(s),x.ENTRY_CLASSES,{cat_class:this.getClassName(c,s.category),src_class:this.getClassName(c,s.source)}),this.get("entryTemplate").replace(/\{(\w+)\}/g,function(t,e){return e in s?s[e]:""})},scrollToLatest:function(){var t=this.get("newestOnTop")?0:this._body.get("scrollHeight");this._body.set("scrollTop",t)},_htmlEscapeMessage:function(t){return t.message=this._encodeHTML(t.message),t.source=this._encodeHTML(t.source),t.sourceAndDetail=this._encodeHTML(t.sourceAndDetail),t.category=this._encodeHTML(t.category),t},_trimOldEntries:function(){r.config.debug=!1;var t,e,s,i,n=this._body,o=this.get("consoleLimit"),l=r.config.debug;if(n&&0<(i=(t=n.all(b+w)).size()-o)){for(this.get("newestOnTop")?(s=o,i=t.size()):s=0,this._body.setStyle("display","none");s<i;++s)(e=t.item(s))&&e.remove();this._body.setStyle("display","")}r.config.debug=l},_encodeHTML:function(t){return B(t)?t.replace($,"&#38;").replace(K,"&#60;").replace(J,"&#62;"):t},_cancelPrintLoop:function(){this._printLoop&&(this._printLoop.cancel(),this._printLoop=null)},_validateStyle:function(t){return"inline"===t||"block"===t||"separate"===t},_onPauseClick:function(t){this.set(f,t.target.get(s))},_onClearClick:function(t){this.clearConsole()},_onCollapseClick:function(t){this.set(i,!this.get(i))},_validateLogSource:function(t){return t&&r.Lang.isFunction(t.on)},_setLogLevel:function(t){return(t=B(t)?t.toLowerCase():t)===L||t===u?t:_},
_getUseBrowserConsole:function(){var t=this.get("logSource");return t instanceof YUI?t.config.useBrowserConsole:null},_setUseBrowserConsole:function(t){var e=this.get("logSource");return e instanceof YUI?e.config.useBrowserConsole=t=!!t:r.Attribute.INVALID_VALUE},_uiSetHeight:function(t){var e;x.superclass._uiSetHeight.apply(this,arguments),this._head&&this._foot&&(e=this.get("boundingBox").get("offsetHeight")-this._head.get("offsetHeight")-this._foot.get("offsetHeight"),this._body.setStyle(h,e+"px"))},_uiSizeCB:function(){},_afterStringsChange:function(t){var e=t.subAttrName?t.subAttrName.split(b)[1]:null,s=this.get(l),i=t.prevVal,t=t.newVal;e&&e!==C||i.title===t.title||s.all(b+S).setHTML(t.title),e&&e!==d||i.pause===t.pause||s.all(b+H).setHTML(t.pause),e&&e!==n||i.clear===t.clear||s.all(b+E).set("value",t.clear)},_afterPausedChange:function(t){var e=t.newVal;t.src!==r.Widget.SRC_UI&&this._uiUpdatePaused(e),e?this._printLoop&&this._cancelPrintLoop():this._schedulePrint()},_uiUpdatePaused:function(t){var e=this._foot.all("input[type=checkbox]."+A);e&&e.set(s,t)},_afterConsoleLimitChange:function(){this._trimOldEntries()},_afterCollapsedChange:function(t){this._uiUpdateCollapsed(t.newVal)},_uiUpdateCollapsed:function(t){var e=this.get("boundingBox"),s=e.all("button."+T),i=t?"addClass":"removeClass",n=this.get("strings."+(t?"expand":"collapse"));e[i](N),s&&s.setHTML(n),this._uiSetHeight(t?this._head.get("offsetHeight"):this.get(h))},_afterVisibleChange:function(t){x.superclass._afterVisibleChange.apply(this,arguments),this._uiUpdateFromHideShow(t.newVal)},_uiUpdateFromHideShow:function(t){t&&this._uiSetHeight(this.get(h))},_onLogEvent:function(t){var e;!this.get(a)&&this._isInLogLevel(t)&&(e=r.config.debug,r.config.debug=!1,this.fire(c,{message:this._normalizeMessage(t)}),r.config.debug=e)},_defResetFn:function(){this.clearConsole(),this.set(v,new Date),this.set(a,!1),this.set(f,!1)},_defEntryFn:function(t){t.message&&(this.buffer.push(t.message),this._schedulePrint())}},{NAME:o,LOG_LEVEL_INFO:_,LOG_LEVEL_WARN:L,LOG_LEVEL_ERROR:u,ENTRY_CLASSES:{entry_class:w,entry_meta_class:G,entry_cat_class:z,entry_src_class:W,entry_time_class:j,entry_content_class:Y},CHROME_CLASSES:{console_hd_class:D,console_bd_class:F,console_ft_class:V,console_controls_class:I,console_checkbox_class:y,console_pause_class:A,console_pause_label_class:H,console_button_class:m,console_clear_class:E,console_collapse_class:T,console_title_class:S},HEADER_TEMPLATE:'<div class="{console_hd_class}"><h4 class="{console_title_class}">{str_title}</h4><button type="button" class="{console_button_class} {console_collapse_class}">{str_collapse}</button></div>',BODY_TEMPLATE:'<div class="{console_bd_class}"></div>',FOOTER_TEMPLATE:'<div class="{console_ft_class}"><div class="{console_controls_class}"><label class="{console_pause_label_class}"><input type="checkbox" class="{console_checkbox_class} {console_pause_class}" value="1" id="{id_guid}"> {str_pause}</label><button type="button" class="{console_button_class} {console_clear_class}">{str_clear}</button></div></div>',ENTRY_TEMPLATE:t,ATTRS:{logEvent:{value:"yui:log",writeOnce:!0,validator:B},logSource:{value:r,writeOnce:!0,validator:function(t){return this._validateLogSource(t)}},strings:{valueFn:function(){return r.Intl.get("console")}},paused:{value:!1,validator:M.isBoolean},defaultCategory:{value:_,validator:B},defaultSource:{value:"global",validator:B},entryTemplate:{value:t,validator:B},logLevel:{value:r.config.logLevel||_,setter:function(t){return this._setLogLevel(t)}},printTimeout:{value:100,validator:P},printLimit:{value:50,validator:P},consoleLimit:{value:300,validator:P},newestOnTop:{value:!0},scrollIntoView:{value:!0},startTime:{value:new Date},lastTime:{value:new Date,readOnly:!0},collapsed:{value:!1},height:{value:"300px"},width:{value:"300px"},useBrowserConsole:{lazyAdd:!1,value:!1,getter:function(){return this._getUseBrowserConsole()},setter:function(t){return this._setUseBrowserConsole(t)}},style:{value:"separate",writeOnce:!0,validator:function(t){return this._validateStyle(t)}}}})},"@VERSION@",{requires:["yui-log","widget"],skinnable:!0,lang:["en","es","hu","it","ja"]});